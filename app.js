!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var r={name:{valueMissing:"–ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ —ç—Ç–æ, –µ—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–µ—Ç?"},price:{valueMissing:"–•–æ—Ç—å –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å —Ü–∏—Ñ—Ä—É, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞"}};class i{constructor(){!function(){const e=document.createElement("div");e.classList.add("wrapper"),e.innerHTML="\n  <div class=\"container\">\n    <h1 class=\"container__title\">GOODS LIST for CRM</h1>\n      \n<div class=\"container__header\">\n  <span class=\"container__header-text\">–¢–æ–≤–∞—Ä—ã</span><span class=\"container__header-plus\">+</span>\n</div>\n\n    <table class=\"container__list\">\n      \n  <thead>\n    <tr>\n      <th class='table__cell table__head' data-id='name'>–ù–∞–∑–≤–∞–Ω–∏–µ</th>\n      <th class='table__cell table__head' data-id='price'>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>\n      <th class='table__cell table__head' data-id='actions'>–î–µ–π—Å—Ç–≤–∏—è</th>\n    </tr>\n  </thead>\n\n    </table>\n    \n  </div>",document.body.append(e)}(),this.container__list=document.querySelector(".container__list"),this.elementAddItem=document.querySelector(".container__header-plus"),this.entries=[],this.error=null}init(){this.addListeners(),this.entries.push({name:"iPhone XR",price:6e4},{name:"Samsung Galaxy S10+",price:8e4},{name:"Huawei View",price:5e4}),this.render()}render(){this.container__list.innerHTML="",this.entries.forEach((e,t)=>{this.addTableRow({element:e,index:t})})}addTableRow(e){const t=i.getNewTableRowElement(e);t.querySelector(".icon-edit").addEventListener("click",e=>{e.preventDefault(),this.showForm(e.target.closest("tr"),!0)},!1),t.querySelector(".icon-delete").addEventListener("click",e=>{e.preventDefault(),this.removeEntry(e.target)},!1),this.container__list.append(t)}static getNewTableRowElement(e){const{index:t}=e,{name:n,price:r}=e.element,i=document.createElement("tr");return i.setAttribute("data-name",n),i.setAttribute("data-price",r),i.setAttribute("data-index",t),i.innerHTML=`\n    <td class="table__cell" data-id="name">${n}</td>\n    <td class="table__cell" data-id="price">${new Intl.NumberFormat("ru-RU").format(r)}</td>\n    <td class="table__cell">\n      <span class="icon-edit">‚úé</span>&nbsp;\n      <span class="icon-delete">ê¢´</span>\n    </td>\n    `,i}editTableRow({name:e,price:t},n){const r=this.entries[n.dataset.index];r.name=e,r.price=t}addListeners(){this.elementAddItem.addEventListener("click",e=>{e.preventDefault(),this.showForm(e.target,!1)},!1)}showForm(e,t){const n={name:e.dataset.name,price:e.dataset.price};this.form=function(e){let t={name:"",price:""};e.name&&e.price&&(t=e);const n=document.createElement("div");return n.classList.add("form-holder"),n.innerHTML=`\n  <form id="goodsForm" novalidate class="form">\n    <h3 class="form__input-header">–ù–∞–∑–≤–∞–Ω–∏–µ</h3>\n    <div class="form-control">\n      <input class="form__input-input" type="text" id="name" name="name" value="${t.name}" required placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" >\n    </div>\n    <h3 class="form__input-header">–°—Ç–æ–∏–º–æ—Å—Ç—å</h3>\n    <div class="form-control">\n      <input class="form__input-input" type="text" id="price" name="price" value="${t.price}" required placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å (123.45)" >\n    </div>\n    <div class="form__input-button-holder">\n      <button type="submit" class="btn" id="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>\n      <button type="button" class="btn" id="cancel">–û—Ç–º–µ–Ω–∞</button>\n    </div>\n  </form>\n  `,n}(n);const r=this.container__list;document.body.appendChild(this.form),this.form.style.width=this.container__list.offsetWidth-10+"px";const{top:i,left:s}=r.getBoundingClientRect();this.form.style.top=window.scrollY+i-10+"px",this.form.style.left=window.scrollX+s+5+"px",this.addFormListeners(e,t),document.forms.goodsForm.name.focus()}addFormListeners(e,t){document.forms.goodsForm.name.addEventListener("input",e=>{e.preventDefault(),e.target.classList.remove("invalid")},!1),document.forms.goodsForm.price.addEventListener("input",e=>{var t,n;e.preventDefault(),e.target.classList.remove("invalid"),t=e.target,n=e=>/^\d*\.{0,1}\d{0,2}$/.test(e),["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach(e=>{t.addEventListener(e,()=>{n(t.value)?(t.oldValue=t.value,t.oldSelectionStart=t.selectionStart,t.oldSelectionEnd=t.selectionEnd):t.hasOwnProperty("oldValue")?(t.value=t.oldValue,t.setSelectionRange(t.oldSelectionStart,t.oldSelectionEnd)):t.value=""})})},!1),document.forms.goodsForm.addEventListener("submit",n=>{n.preventDefault(),this.forceEntryChanges(e,t)},!1),document.getElementById("save").addEventListener("click",n=>{n.preventDefault(),this.forceEntryChanges(e,t)},!1),document.getElementById("cancel").addEventListener("click",e=>{e.preventDefault(),this.closeForm(e.target.closest(".form-holder"))},!1)}forceEntryChanges(e,t){const n=document.forms.goodsForm;let{error:i}=this;null!==i&&(i.remove(),i=null);if(!n.checkValidity()){[...n.elements].filter(e=>e.validity.valid&&!e.classList.contains("btn")).forEach(e=>{e.classList.add("valid"),e.classList.remove("invalid")});const e=[...n.elements].find(e=>!e.validity.valid);e.focus(),e.classList.remove("valid"),e.classList.add("invalid");const t=e.validity;let s="–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞";for(const e in t)t[e]&&(s=e);return i=document.createElement("div"),i.dataset.id="error",i.className="form-error",i.textContent=""+r[e.name][s],e.offsetParent.appendChild(i),i.style.top=e.offsetTop+e.offsetHeight/2-i.offsetHeight/2+"px",i.style.left=e.offsetLeft+e.offsetWidth+5+"px",void(this.error=i)}const s=n.name.value,a=n.price.value;t?this.editTableRow({name:s,price:a},e):this.entries.push({name:s,price:a}),this.closeForm(this.form),this.render()}removeEntry(e){this.entries.splice(e.closest("tr").dataset.index,1),this.render()}closeForm(e){e.remove(),this.form=null}}(new i).init()}]);
//# sourceMappingURL=app.js.map